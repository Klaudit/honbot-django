{% extends 'base.html' %}

{% block page_title %}{{ stats.nickname }} Player Stats | HonBot {% endblock %}

{% block main_content %}
<script type="text/javascript">var fb_param = {};fb_param.pixel_id = '6010565184057';fb_param.value = '0.00';fb_param.currency = 'USD';(function(){var fpw = document.createElement('script');fpw.async = true;fpw.src = '//connect.facebook.net/en_US/fp.js';var ref = document.getElementsByTagName('script')[0];ref.parentNode.insertBefore(fpw, ref);})();</script><noscript><img height="1" width="1" alt="" style="display:none" src="https://www.facebook.com/offsite_event.php?id=6010565184057&amp;value=0&amp;currency=USD" /></noscript>
<header class="player-head">
    <div class='container'>
        <div class="row">
            <div class="col-lg-7 col-12 col-3 col-sm-6">
                <h1><div id="avatar" class="pull-left"></div> {{ stats.nickname }}</h1>
            </div>
            <div class="col-lg-1 text-center col-2 col-2 col-sm-1">
                <h4 style="margin-bottom: 2px;">mmr</h4>{{ stats.mmr }}
            </div>
            <div class="col-lg-1 text-center col-2 col-2 col-sm-1">
                <h4 style="margin-bottom: 2px;">tsr</h4>{{ stats.TSR }}
            </div>
            <div class="col-lg-1 text-center col-2 col-2 col-sm-1">
                <h4 style="margin-bottom: 2px;">win</h4>{{ stats.wins }}
            </div>
            <div class="col-lg-1 text-center col-2 col-2 col-sm-1">
                <h4 style="margin-bottom: 2px;">loss</h4>{{ stats.losses }}
            </div>
            <div class="col-lg-1 text-center col-2 col-2 col-sm-1">
                <h4 style="margin-top: 21px;">{{ stats.winpercent }}</h4>
            </div>
        </div>
    </div>
</header>
<div class="container">
    <div class="row">
        <div class="col-lg-12">
            <ul class="nav nav-pills nav-justified">
                <li {% if mode == "rnk" %}class="active"{% endif %}><a href="/player/{{ stats.nickname }}/">Ranked</a></li>
                <li {% if mode == "cs" %}class="active"{% endif %}><a href="/c/player/{{ stats.nickname }}/">Casual</a></li>
                <li {% if mode == "acc" %}class="active"{% endif %}><a href="/p/player/{{ stats.nickname }}/">Public</a></li>
                <li><a href="#banner" type="button" data-toggle="modal">Stats Banner</a></li>
            </ul>
        </div>
    </div>
</div>
<div class="container">
    <div class="row">
        <div class="col-lg-5">
            <div class="row">
                <div class="col-lg-6 panel panel-swag col-6">
                    <h4 class="panel-heading text-center">Lifetime</h4>
                    <ul style="margin-top: -14px;" class="list-group list-group-flush">
                        <li style="border-top-color: #fff;" class="list-group-item">Hours<p class="pull-right">{{ stats.hours }}</p></li>
                        <li class="list-group-item">Kills<p class="pull-right">{{ stats.kills }}</p></li>
                        <li class="list-group-item">Deaths<p class="pull-right">{{ stats.deaths }}</p></li>
                        <li class="list-group-item">Assists<p class="pull-right">{{ stats.assists }}</p></li>
                        <li class="list-group-item">Matches<p class="pull-right">{{ stats.matches }}</p></li>
                        <li class="list-group-item">K:D Ratio<p class="pull-right">{{ stats.kdr }}</p></li>
                        <li class="list-group-item">K+ADR<p class="pull-right">{{ stats.kadr }}</p></li>
                        <li class="list-group-item">CC Games<p class="pull-right">{{ stats.cc }}</p></li>
                        <li class="list-group-item">CC Calls<p class="pull-right">{{ stats.cccalls }}</p></li>
                        <li class="list-group-item">DC<p class="pull-right">{{ stats.left }}</p></li>
                        <li class="list-group-item">Kicked<p class="pull-right">{{ stats.kicked }}</p></li>
                    </ul>
                </div>
                <div class="col-lg-6 panel panel-swag col-6">
                    <h4 class="panel-heading text-center">Average</h4>
                    <ul style="margin-top: -14px;" class="list-group list-group-flush">
                        <li style="border-top-color: #fff;" class="list-group-item">Minutes<p class="pull-right">{{ stats.atime }}</p></li>
                        <li class="list-group-item">Kills<p class="pull-right">{{ stats.akills }}</p></li>
                        <li class="list-group-item">Deaths<p class="pull-right">{{ stats.adeaths }}</p></li>
                        <li class="list-group-item">Assists<p class="pull-right">{{ stats.aassists }}</p></li>
                        <li class="list-group-item">Creeps<p class="pull-right">{{ stats.acs }}</p></li>
                        <li class="list-group-item">Denies<p class="pull-right">{{ stats.adenies }}</p></li>
                        <li class="list-group-item">XP/min<p class="pull-right">{{ stats.axpmin }}</p></li>
                        <li class="list-group-item">GPM<p class="pull-right">{{ stats.agoldmin }}</p></li>
                        <li class="list-group-item">APM<p class="pull-right">{{ stats.aactionsmin }}</p></li>
                        <li class="list-group-item">Wards<p class="pull-right">{{ stats.awards }}</p></li>
                        <li class="list-group-item">Consumeable<p class="pull-right">{{ stats.aconsumables }}</p></li>
                    </ul>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-6 panel panel-swag col-6">
                    <h4 class="panel-heading text-center">Streaks</h4>
                    <ul style="margin-top: -14px;" class="list-group list-group-flush">
                        <li style="border-top-color: #fff;" class="list-group-item">Serial Killer<p class="pull-right">{{ stats.ks3 }}</p></li>
                        <li class="list-group-item">Ultimate Warrior<p class="pull-right">{{ stats.ks4 }}</p></li>
                        <li class="list-group-item">Legendary<p class="pull-right">{{ stats.ks5 }}</p></li>
                        <li class="list-group-item">Onslaught<p class="pull-right">{{ stats.ks6 }}</p></li>
                        <li class="list-group-item">Savage Sick<p class="pull-right">{{ stats.ks7 }}</p></li>
                        <li class="list-group-item">Dominating<p class="pull-right">{{ stats.ks8 }}</p></li>
                        <li class="list-group-item">Champion<p class="pull-right">{{ stats.ks9 }}</p></li>
                        <li class="list-group-item">Bloodbath<p class="pull-right">{{ stats.ks10 }}</p></li>
                        <li class="list-group-item">Immortal<p class="pull-right">{{ stats.ks15 }}</p></li>
                        <li class="list-group-item">Double Tap<p class="pull-right">{{ stats.doublekill }}</p></li>
                        <li class="list-group-item">Hat-Trick<p class="pull-right">{{ stats.triplekill }}</p></li>
                        <li class="list-group-item">Quad Kill<p class="pull-right">{{ stats.quadkill }}</p></li>
                        <li class="list-group-item">Annihilation<p class="pull-right">{{ stats.annihilation }}</p></li>
                    </ul>
                </div>
                <div class="col-lg-6 panel panel-swag col-6">
                    <h4 class="panel-heading text-center">Special</h4>
                    <ul style="margin-top: -14px;" class="list-group list-group-flush">
                        <li style="border-top-color: #fff;" class="list-group-item">Humiliation<p class="pull-right">{{ stats.humiliation }}</p></li>
                        <li class="list-group-item">Smackdown<p class="pull-right">{{ stats.smackdown }}</p></li>
                        <li class="list-group-item">Bloodlust<p class="pull-right">{{ stats.bloodlust }}</p></li>
                        <li class="list-group-item">Nemesis<p class="pull-right">{{ stats.nemesis }}</p></li>
                        <li class="list-group-item">Retribution<p class="pull-right">{{ stats.retribution }}</p></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="col-lg-7 col-12 text-center">
            <table id="history" class="table table-condensed recent-match">
                <thead>
                    <tr>
                        <th class="text-center">Hero &amp; lvl</th>
                        <th class="text-center">K / D / A</th>
                        <th class="text-center">APM</th>
                        <th class="text-center">GPM</th>
                        <th class="text-center">MMR +/-</th>
                        <th class="text-center">Date</th>
                        <th class="text-center">Match #</th>
                    </tr>
                </thead>
                <tbody id="recent-matches">
                </tbody>
            </table>
            <p><i id="match-load" class="icon-spinner icon-spin icon-2x"></i></p>
            <a id="more" class="btn btn-default btn-small">Load More</a>
            <div id="no-more"></div>
        </div>
    </div>
</div>
<div class="modal fade" id="banner">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                <h4 class="modal-title">Stats Banner: Updates every 24 hours!</h4>
            </div>
            <div class="modal-body text-center">
                <p id="bannerpos"></p>
                <p>
                    <h4>BB Code (forums)</h4>
                    <code>[url=http://honbot.com/player/{{stats.nickname}}/]<br>[img]http://honbot.com/banner/{{stats.nickname}}/[/img][/url]</code>
                    <h4>Direct Link</h4>
                    <code>http://honbot.com/banner/{{stats.nickname}}/</code>
                </p>
            </div>
        </div>
    </div>
</div>
<br>
{% endblock main_content %}
{%block js%}
<script>
$.get("/match_history/{{ stats.player_id }}/?more=0&mode={{ mode }}",
function (data) {
    if (data == "stop") {
        $('#more').remove();
        $('#no-more').append("HonBot has reached the end of your recent matches");
    } else {
        $('#recent-matches').append(data);
        $('#recent-matches tr').click(function(){
            window.location = $(this).attr('href');
            return false;
        });
    }
    $("#match-load").hide();
});
</script>
<script>
var counter = 0;
$("#more").click(function() {
    $("#match-load").show();
    var table = $('#recent-matches')
    counter++;
    url = "/match_history/{{ stats.player_id }}/?more=" + String(counter) + "&mode={{ mode }}"
    $.get(url,
    function(data) {
        if(data == "stop") {
            $('#more').remove();
            $('#no-more').append("HonBot has reached the end of your recent matches")
        } 
        else {
            table.append(data);
            $('#recent-matches tr').click(function(){
                window.location = $(this).attr('href');
                return false;
            });
        }
        $("#match-load").hide();
    });
});
</script>
<script>
$.get("/avatar/{{ stats.player_id }}/50/",
    function(data) {
        $('#avatar').append(data)
    });
</script>
<script>
$('#banner').one('show.bs.modal', function () {
  $('#bannerpos').append('<img src="/banner/{{stats.nickname}}/">')
});
</script>
{%endblock js%}