{% extends 'base.html' %}

{% block page_title %}{{ stats.nickname }} Player Stats | HonBot {% endblock %}

{% block main_content %}

    <!-- Player Header -->
    {% include 'player_head.html' %}

    <!-- Player Navigation-->
    {% include 'player_navigation.html' %}
    <div class="container adsbygoogle">
        <div class="row">
            <div class="col-lg-12 col-md-12 text-center hidden-xs hidden-sm">
                <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                <!-- dark - bottom banner! -->
                <ins class="adsbygoogle"
                     style="display:inline-block;width:970px;height:90px"
                     data-ad-client="ca-pub-7640562161899788"
                     data-ad-slot="7614685358"></ins>
                <script>
                (adsbygoogle = window.adsbygoogle || []).push({});
                </script>
            </div>
        </div>
    </div>
    {% if fallback %}
        <div class="container">
            <div class="row">
                <div class="col-lg-12">
                    <div class="alert alert-danger">S2 API is not responding! These stats were last updated
                        on {{ stats.updated }}</div>
                </div>
            </div>
        </div>
    {% endif %}
    <div class="container">
    <div class="row">
    <div style="padding-left:0;padding-right:0;" class="col-lg-5 col-md-5 col-sm-12 col-xs-12">
        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
            <div class="panel panel-default">
                <div class="panel-heading"><h4 class="panel-title text-center">Player Stats</h4></div>
                <table class="table table-striped hero-table">
                    <thead>
                    <tr>
                        <th></th>
                        <th>Lifetime</th>
                        <th>Average</th>
                    </tr>
                    </thead>
                    <tbody style="border-bottom:2px solid grey;">
                    <tr>
                        <td>Game Time</td>
                        <td>{{ stats.hours }} h</td>
                        <td>{{ stats.atime }} m</td>
                    </tr>
                    <tr>
                        <td>Kills</td>
                        <td>{{ stats.kills }}</td>
                        <td>{{ stats.akills }}</td>
                    </tr>
                    <tr>
                        <td>Deaths</td>
                        <td>{{ stats.deaths }}</td>
                        <td>{{ stats.adeaths }}</td>
                    </tr>
                    <tr>
                        <td>Assists</td>
                        <td>{{ stats.assists }}</td>
                        <td>{{ stats.aassists }}</td>
                    </tr>
                    </tbody>
                </table>
                <table class="table table-striped table-bordered hero-table">
                    <tbody>
                    <tr>
                        <td>KDR <span class="pull-right">{{ stats.kdr }}</span></td>
                        <td><span class="pull-left">K+A:D</span> {{ stats.kadr }}</td>
                    </tr>
                    <tr>
                        <td>Creep Kills <span class="pull-right">{{ stats.acs }}</span></td>
                        <td><span class="pull-left">Exp/min</span> {{ stats.axpmin }}</td>
                    </tr>
                    <tr>
                        <td>Creep Denies<span class="pull-right">{{ stats.adenies }}</span></td>
                        <td><span class="pull-left">Gold/min</span>{{ stats.agoldmin }}</td>
                    </tr>
                    <tr>
                        <td>Wards<span class="pull-right">{{ stats.awards }}</span></td>
                        <td><span class="pull-left">Actions/min</span>{{ stats.aactionsmin }}</td>
                    </tr>
                    <tr>
                        <td>Matches<span class="pull-right">{{ stats.matches }}</span></td>
                        <td><span class="pull-left">Consumables</span>{{ stats.aconsumables }}</td>
                    </tr>
                    <tr>
                        <td>Ended in CC<span class="pull-right">{{ stats.cc }}</span></td>
                        <td><span class="pull-left">Disconnects</span>{{ stats.left }}</td>
                    </tr>
                    <tr>
                        <td>Called for CC<span class="pull-right">{{ stats.cccalls }}</span></td>
                        <td><span class="pull-left">Kicked</span>{{ stats.kicked }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-6">
            <div class="panel panel-default">
                <div class="panel-heading"><h4 class="panel-title text-center">Special</h4></div>
                <table class="table table-striped hero-table">
                    <tbody>
                    <tr>
                        <td>Humiliation</td>
                        <td>{{ stats.humiliation }}</td>
                    </tr>
                    <tr>
                        <td>Smackdown</td>
                        <td>{{ stats.smackdown }}</td>
                    </tr>
                    <tr>
                        <td>Bloodlust</td>
                        <td>{{ stats.bloodlust }}</td>
                    </tr>
                    <tr>
                        <td>Retribution</td>
                        <td>{{ stats.retribution }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div class="col-lg-6 col-md-6 col-sm-12 col-xs-6">
            <div class="panel panel-default">
                <div class="panel-heading"><h4 class="panel-title text-center">Streaks</h4></div>
                <table class="table table-striped hero-table">
                    <tbody>
                    <tr>
                        <td>Serial Killer <span class="text-muted">(3)</span></td>
                        <td>{{ stats.ks3 }}</td>
                    </tr>
                    <tr>
                        <td>Ultimate Warrior <span class="text-muted">(4)</span></td>
                        <td>{{ stats.ks4 }}</td>
                    </tr>
                    <tr>
                        <td>Legendary <span class="text-muted">(5)</span></td>
                        <td>{{ stats.ks5 }}</td>
                    </tr>
                    <tr>
                        <td>Onslaught <span class="text-muted">(6)</span></td>
                        <td>{{ stats.ks6 }}</td>
                    </tr>
                    <tr>
                        <td>Savage Sick <span class="text-muted">(7)</span></td>
                        <td>{{ stats.ks7 }}</td>
                    </tr>
                    <tr>
                        <td>Dominating <span class="text-muted">(8)</span></td>
                        <td>{{ stats.ks8 }}</td>
                    </tr>
                    <tr>
                        <td>Champion <span class="text-muted">(9)</span></td>
                        <td>{{ stats.ks9 }}</td>
                    </tr>
                    <tr>
                        <td>Bloodbath <span class="text-muted">(10)</span></td>
                        <td>{{ stats.ks10 }}</td>
                    </tr>
                    <tr>
                        <td>Immortal <span class="text-muted">(15)</span></td>
                        <td>{{ stats.ks15 }}</td>
                    </tr>
                    </tbody>
                    <tbody style="border-top-color: grey;">
                    <tr>
                        <td>Double Tap <span class="text-muted">(2x)</span></td>
                        <td>{{ stats.doublekill }}</td>
                    </tr>
                    <tr>
                        <td>Hat-Trick <span class="text-muted">(3x)</span></td>
                        <td>{{ stats.triplekill }}</td>
                    </tr>
                    <tr>
                        <td>Quad Kill <span class="text-muted">(4x)</span></td>
                        <td>{{ stats.quadkill }}</td>
                    </tr>
                    <tr>
                        <td>Annihilation <span class="text-muted">(5x)</span></td>
                        <td>{{ stats.annihilation }}</td>
                    </tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div style="padding-left:0;" class="col-lg-7 col-md-7 col-sm-9 col-xs-12 text-center">
        <table id="history" class="table table-header table-condensed recent-match">
            <thead>
            <tr>
                <th class="text-center">Hero lvl</th>
                <th class="text-center">K/D/A</th>
                <th class="text-center">APM</th>
                <th class="text-center">GPM</th>
                <th class="text-center">MMR +/-</th>
                <th class="text-center">Date</th>
                <th class="text-center">Match #</th>
            </tr>
            </thead>

            <tbody id="recent-matches">
            </tbody>
        </table>
        <p><i id="match-load" class="fa fa-spinner fa-2x fa-spin"></i></p>
        <a id="more" class="btn btn-default btn-small">Load More</a>

        <div id="no-more"></div>
        <br>
    </div>
    </div>
    </div>
    {% include 'banner.html' %}
{% endblock main_content %}
{% block js %}
    <script>
        var counter = 1;
        recentmatches = $("#recent-matches");
        $.get("{% if mode == 'cs' %}/c{% elif mode == 'acc' %}/p{% endif %}/player_history/{{ stats.player_id }}/1/",
                function (data) {
                    if (data == "stop") {
                        $('#more').remove();
                        $('#no-more').append("HonBot has reached the end of your recent matches");
                    } else {
                        recentmatches.append(data);
                        recentmatches.find('tr').click(function () {
                            window.location = $(this).attr('href');
                            return false;
                        });
                    }
                    $("#match-load").hide();
                });
        $("#more").click(function () {
            $("#match-load").show();
            counter++;
            url = "{% if mode == 'cs' %}/c{% elif mode == 'acc' %}/p{% endif %}/player_history/{{ stats.player_id }}/" + String(counter) + "/";
            $.get(url, function (data) {
                if (data == "stop") {
                    $('#more').remove();
                    $('#no-more').append("HonBot has reached the end of your recent matches")
                }
                else {
                    recentmatches.append(data);
                    recentmatches.find('tr').click(function () {
                        window.location = $(this).attr('href');
                        return false;
                    });
                }
                $("#match-load").hide();
            });
        });
    </script>
{% endblock js %}